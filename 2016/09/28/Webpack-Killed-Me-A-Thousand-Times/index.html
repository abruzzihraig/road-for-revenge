<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="A journal for the road">
    

    <!--Author-->
    
        <meta name="author" content="Yang He">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Webpack Killed Me A Thousand Times"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="A journal for the road" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Road To Revenge"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Webpack Killed Me A Thousand Times - Road To Revenge</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2016/09/28/Webpack-Killed-Me-A-Thousand-Times/">
                Webpack Killed Me A Thousand Times
            </a>
        </h1>
        <div class="post-info">
            <span class="date">2016-09-28</span>
            <a href="https://github.com/abruzzihraig/road-for-revenge/issues/59" target="_blank" class="comments article-comment-link">review</a>

            
            
                <span class="category">
                    <a href="/categories/Journal/">Journal</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <p>I’ve been using Webpack more than half year. It hurts me every time when I want to implement some essential features. I was totally confused why there are so many people like its black magic with its shitty documents?</p>
<p>Whatever I complain, I have to say there are some features under the hood of Webpack are actually useful and effective for developing. But these two days, I met some issues with build flow based on Webpack, and that make my tasks on KDP project are delayed.</p>
<p>I have two projects, one named KDP, another named Kanvas. The project Kanvas is an image editor could be released as a standalone version or an embedded version to KDP.</p>
<p>And we use AWS S3 as a static server. So each of those projects will be deployed to different S3 buckets. However, the AWS S3 doesn’t support compression automatically like a real HTTP server, a Nginx server for instance. But we still could compress or make cache metadata for some kinds of files before we upload them.</p>
<p>So the trouble comes:</p>
<ol>
<li>I need compiled and compressed resources from Kanvas to a S3 bucket as a standalone version.</li>
<li>I need compiled but uncompressed resources from Kanvas to KDP, to make developers could use Kanvas within KDP development mode. In this integration version of Kanvas, it need to import two scripts for initialising and controlling Kanvas from outside. The both scripts shouldn’t be compressed or with a hash.</li>
<li>I need compiled and compressed resources from KDP to another S3 bucket, it should be a public website for our clients. Since Kanvas and KDP are different projects, they have individual Webpack flow for themselves. So the process of compressing KDP doesn’t include the code from Kanvas. That means I have to compress code in Kanvas first, then copy the part-compressed code to KDP compiled folder.</li>
</ol>
<p>However, it’s not over yet. When I upload the final compiled folder to S3 bucket, I used a loader to add different HTTP metadata for each file will be uploaded. That means I have to ignore some files to prevent adding wrong metadata on.</p>
<p>The whole build flow made me hurt before, it always take me much time, and the logic order is hard to remember. Once I made a mistake during the flow, I have to take 5 or 10 minutes to rebuild them again.</p>
<p>So I refacted the whole build flow, I made three different environments for KDP, it includes ‘dev’, ‘dist’, ‘s3’. And I made four different environments for Kanvas, they are ‘dev’, ‘dist’, ‘gzip’, and ’s3’.</p>
<p>Some of those environments have different basic configs are extended to the main Webpack config, especially some different paths. At the mean time, I made our API configs relating to these different environments.</p>
<p>And I also wrote my AWS keys to the environment of my computer, then I could use them when deploy. Except some npm scripts on the both projects, I also wrote some alias scripts on my ZShell to make the complex building logic simpler.</p>
<p>So even though I met lots of pits in Webpack again, finally I got only two commands to handle all those shitty work. And yes, I’m free again.</p>
<p><em>Pls comment on the relative Issue of this journal on my Github, any advice would be appreciated!</em></p>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/Webpack/">#Webpack</a>
        </div>
    

    <!-- Comments -->
    
    <div class="comments">
        


    </div>
    

</div>

        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    All of themes are shit on Hexo except this funny one. Thanks for the desinger Jonathan Klughertz. So that I could use it to leverage my journals performed better.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2016/11/29/Best-Musical-Toy/">Best Musical Toy</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/11/28/Tired-On-Arguing/">Tired On Arguing</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/11/27/Normal-Sunday/">Normal Sunday</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/11/26/Why-To-Become-An-Entertaining-Person/">Why To Become An Entertai</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/Journal/">Journal</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/abruzzihraig/">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:abruzzi.hraig@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    Thanks for the guy's design <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>